# –ß–∞—Ç–±–æ—Ç —Å –º—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω—ã–º –ø–æ–∏—Å–∫–æ–º –Ω–∞ Colpali –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –æ—Ç–≤–µ—Ç–æ–≤ —Å–ø–æ–º–æ—â—å—é LLaMA 3.2 Vision 11b

**–ö–æ–º–∞–Ω–¥–∞: 200 OK**
**–¢—Ä–µ–∫: –ú—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω—ã–µ RAG –º–æ–¥–µ–ª–∏***

---

## –û–ø–∏—Å–∞–Ω–∏–µ

–ß–∞—Ç–±–æ—Ç —Ä–µ–∞–ª–∏–∑—É–µ—Ç –º—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫ –∏ –æ—Ç–≤–µ—Ç—ã —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞. –°–∏—Å—Ç–µ–º–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ Docker –∏ –ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–≤—É—Ö –º–∞—à–∏–Ω —Å GPU.

---

## –ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º

1. **–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –¥–∞—Ç–∞—Å–µ—Ç:**
   [–°—Å—ã–ª–∫–∞ –Ω–∞ –¥–∏—Å–∫](https://disk.yandex.com/d/5i24L_kpgaWYJA)

2. **–ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–Ω–¥–µ–∫—Å:**
   [–°—Å—ã–ª–∫–∞ –Ω–∞ –¥–∏—Å–∫](https://disk.yandex.com/d/dF7eBlPtJs9GNA)

3. **–§–∞–π–ª `.byaldi`**
   –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å —Å–∫–∞—á–∞–Ω–Ω—ã–π —Ñ–∞–π–ª `byaldi` –≤ `.byaldi`.

---

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –æ–∫—Ä—É–∂–µ–Ω–∏—é
–ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è —Ä–∞–±–æ—Ç–∞ –Ω–∞ —Å–ª–µ–¥—É–µ—à–∏—Ö –≤–µ—Ä—Å–∏—è—Ö —è–¥—Ä–∞, –ü–û, –¥—Ä–∞–π–≤–µ—Ä–æ –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫ –∏ hardware

### –í–µ—Ä—Å–∏–∏ —è–¥—Ä–∞, –¥—Ä–∞–π–≤–µ—Ä–æ–≤ –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫
```
Docker version 24.0.7, build afdd53b
NVIDIA Container Runtime Hook version 1.17.2
NVIDIA Driver Version: 535.113.01
CUDA Version: 12.2
Linux COMP 6.2.0-33-generic #33~22.04.1-Ubuntu SMP PREEMPT_DYNAMIC Thu Sep  7 10:33:52 UTC 2 x86_64 x86_64 x86_64 GNU/Linux
```

### –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ
```
CPU: Ryzen 1700
RAM: 16GB
GPU: RTX2070 8GB (–º–∞—à–∏–Ω–∞ 1 –¥–ª—è Colpali)
GPU: RTX4090 24GB (–º–∞—à–∏–Ω–∞ 2 –¥–ª—è –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞ LLaMA 3.2)
```

---
# –†–µ—à–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–ª–æ—Å—å –Ω–∞ 2—Ö –º–∞—à–∏–Ω–∞—Ö —Å gpu, —Ç–∞–∫ –∫–∞–∫ –Ω–µ —Ö–≤–∞—Ç–∞–ª–æ GPU memory.

## –®–∞–≥–∏ –∑–∞–ø—É—Å–∫–∞

### 0. –ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º

–í–Ω–µ—Å—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤ `pipelines.py`:
```python
# –í —Ñ—É–Ω–∫—Ü–∏–∏ generate_oollama_response_generator —É–∫–∞–∑–∞—Ç—å –∞–¥—Ä–µ—Å 2-–π –º–∞—à–∏–Ω—ã
url = "http://[—É–∫–∞–∑–∞—Ç—å —Ç—É—Ç –∞–¥—Ä–µ—Å 2 –º–∞—à–∏–Ω—ã]:8080/api/chat"
```

### 1. –ó–∞–ø—É—Å–∫ –Ω–∞ –º–∞—à–∏–Ω–µ 2
```bash
docker run -it --gpus=all -p 3000:11434 --name ollama ollama/ollama:latest
```

### 2. –ó–∞–ø—É—Å–∫ –Ω–∞ –º–∞—à–∏–Ω–µ 1
```bash
docker build -t=ragsol .
```

```bash
docker run -it --gpus=all -p 8080:8080 --name=ragsol -v=./docs:/app/docs -v ./test_dataset:/app/test_dataset -v=./.byaldi:/app/.byaldi -v ./colpali:/app/colpali ragsol
```

```bash
docker exec -it ragsol bash
```

```bash
streamlit run main.py --server.port=8080  # <- –∑–∞–ø—É—Å–∫ —Ñ—Ä–æ–Ω—Ç–∞ –Ω–∞ 8080 –ø–æ—Ä—Ç—É –Ω–∞ –ª–æ–∫–∞–ª —Ö–æ—Å—Ç–µ
```
‚ùóÔ∏è‚ùóÔ∏è‚ùóÔ∏è^ –Ω–∞ —ç—Ç–æ–º —à–∞–≥–µ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –ø—Ä–æ–∏–∑–∞–π–¥–µ—Ç –∑–∞–≥—Ä—É—Å–∫–∞ colpali –º–æ–¥–µ–ª–∏ ~ 6–ì–±
‚åõÔ∏è –ù—É–∂–Ω–æ –ø–æ–¥–æ–∂–¥–∞—Ç—å...

üòé **FINAL** –ú–æ–∂–Ω–æ –∑–∞—Ö–æ–¥–∏—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä –Ω–∞ http://[–∞–¥—Ä–µ—Å –º–∞—à–∏–Ω—ã 1]:8080
